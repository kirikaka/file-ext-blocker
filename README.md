
# File Extension Blocker (과제)
마드라스체크 플로우 과제 전형 - SaaS 개발자


파일 확장자에 따라 특정 형식의 파일을 첨부하거나 전송하지 못하도록 제한하기 위한 “차단 확장자 목록 관리” 기능입니다.
고정 확장자 체크 상태와 커스텀 확장자 추가/삭제를 DB에 저장해 새로고침 후에도 유지되도록 구현했습니다.

## 기능 요구사항
- 고정 확장자(FIXED)
    - 기본은 uncheck 상태로 제공됩니다.
    - 체크/언체크 시 DB에 저장되며 새로고침 후 유지됩니다.
- 커스텀 확장자(CUSTOM)
    - 확장자 1개는 최대 20자입니다.
    - 최대 200개까지 추가할 수 있습니다.
    - 추가 시 DB 저장 및 화면에 태그로 표시되며, X 클릭 시 DB에서 삭제됩니다.
- 추가 고려사항
    - 확장자 입력은 `trim + lowercase + 앞의 '.' 제거`로 정규화하고, 중복 추가를 방지합니다.

## 기술 스택
- Java 17 / Spring Boot
- Spring MVC + Thymeleaf (페이지 렌더링)
- Spring Data JPA + MySQL



## 화면 동작
- 페이지 최초 로딩 시 서버 렌더링으로 고정/커스텀 목록을 표시합니다.
- 이후 체크/추가/삭제는 `fetch`로 API를 호출하고, 성공 시 목록을 재조회하여 화면을 갱신합니다.

## API 명세
- `GET /api/extensions`
    - 고정 확장자 목록(checked 여부 포함) + 커스텀 확장자 목록 반환
- `PUT /api/extensions/fixed/{ext}`
    - body: `{ "blocked": true | false }`
- `POST /api/extensions/custom`
    - body: `{ "ext": "sh" }`
- `DELETE /api/extensions/custom/{ext}`

에러 응답은 `{ "message": "..." }` 형태로 통일합니다.

## 데이터 정책 (정규화/제약)
- 정규화: `.SH ` → `sh` (trim/lowercase/앞 점 제거)
- 중복: FIXED/CUSTOM 구분 없이 확장자 값은 중복 불가(UNIQUE).
- 제한: 커스텀 확장자 최대 200개, 확장자 길이 최대 20자.

## 요구사항 외 고려한 점(중복/동시성/한계)

- 중복 처리 정책: 확장자 입력은 `trim + lowercase + 앞의 '.' 제거`로 정규화한 뒤 저장하여, `.SH`, `sh ` 같은 입력도 동일한 값으로 취급되도록 했습니다.
- 중복 방지 방식: 애플리케이션 레벨에서 존재 여부를 먼저 확인하고, 최종적으로는 DB에 `ext` UNIQUE 제약을 두어 동시 요청에서도 중복 저장을 방지하도록 했습니다.
- FIXED/CUSTOM 충돌: FIXED에 존재하는 확장자를 CUSTOM으로 다시 추가하는 케이스는 “이미 존재”로 처리하여 정책을 단순화했습니다.
- 입력 검증 범위: 요구사항에 명시된 조건(길이 20, 개수 200, 중복) 위주로 검증하고, 확장자 허용 문자 정책(영문/숫자 제한 등)은 명시가 없어 과도한 제한을 두지 않았습니다.

